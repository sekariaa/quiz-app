(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{5887:function(e,r,t){Promise.resolve().then(t.bind(t,918))},5514:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return i},a:function(){return o}});var n=t(7437),s=t(2265),a=t(148);let c=(0,s.createContext)(void 0),i=e=>{let{children:r}=e,[t,i]=(0,s.useState)(null),[o,u]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,a.Vy)().onAuthStateChanged(e=>{i(e),u(!1)});return()=>e()},[]),(0,n.jsx)(c.Provider,{value:{user:t,loading:o},children:r})},o=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},148:function(e,r,t){"use strict";t.d(r,{DM:function(){return p},F7:function(){return f},Mo:function(){return u},Ms:function(){return x},Vy:function(){return o},cL:function(){return l},n2:function(){return h},sp:function(){return m},v$:function(){return d}});var n=t(5236),s=t(5735),a=t(9842);(0,n.C6)().length||(0,n.ZF)({apiKey:"AIzaSyC0asw5YPc1NtfiwOWPDs6DSJzSu4v2rag",authDomain:"quiz-app-e5a9c.firebaseapp.com",projectId:"quiz-app-e5a9c",storageBucket:"quiz-app-e5a9c.appspot.com",messagingSenderId:"1052981741207",appId:"1:1052981741207:web:659750b96c46cdd7b94bd2"});let c=(0,s.v0)(),i=(0,a.ad)(),o=()=>c,u=async(e,r,t)=>{let n=(0,a.IO)((0,a.hJ)(i,"users"),(0,a.ar)("username","==",t));if(!(await (0,a.PL)(n)).empty){let e=Error("Username already exists");throw e.code="auth/username-already-in-use",e}let o=(await (0,s.Xb)(c,e,r)).user.uid;await (0,a.pl)((0,a.JU)(i,"users",o),{username:t})},l=async(e,r)=>{await (0,s.e5)(c,e,r)},d=e=>{switch(e){case"auth/user-not-found":return"Email not registered";case"auth/wrong-password":return"Wrong password";default:return"Incorrect email or password"}},h=e=>{switch(e){case"auth/email-already-in-use":return"Email has been registered";case"auth/username-already-in-use":return"Username already exists";default:return"An error occurred during the sign up process"}},x=async e=>{try{let r=(0,a.JU)(i,"users",e),t=await (0,a.QT)(r);if(t.exists())return t.data().username;return console.log("No such document!"),null}catch(e){return console.error("Error getting document:",e),null}},m=async(e,r,t)=>{try{await (0,a.pl)((0,a.JU)(i,"users",e),{correct:r,incorrect:t,score:20*r},{merge:!0})}catch(e){console.error("Error saving score to Firestore:",e)}},f=async e=>{try{let r=(0,a.JU)(i,"users",e),t=await (0,a.QT)(r);if(!t.exists())return console.log("No such document!"),null;{let e=t.data();return{correct:e.correct,incorrect:e.incorrect,score:e.score}}}catch(e){return console.error("Error getting document:",e),null}},p=async()=>{try{let e=[];return(await (0,a.PL)((0,a.hJ)(i,"users"))).forEach(r=>{let t=r.data(),n={userId:r.id,username:t.username,score:t.score};e.push(n)}),e}catch(e){return console.error("Error getting scores:",e),null}}},918:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Z}});var n=t(7437),s=t(2265),a=t(3536),c=t(6645),i=t(8884),o=t(8367),u=t(8292),l=t(2674),d=t(4691),h=t(7116),x=t(4990),m=t(468),f=t(8433),p=t(148),g=t(1225),j=t(7138);let w=(0,a.ZP)(o.Z)(e=>{let{theme:r}=e;return{["&.".concat(u.Z.head)]:{backgroundColor:"#21888E",color:r.palette.common.white},["&.".concat(u.Z.body)]:{fontSize:14}}}),y=(0,a.ZP)(h.Z)(e=>{let{theme:r}=e;return{"&:nth-of-type(odd)":{backgroundColor:r.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}});var b=()=>{let[e,r]=(0,s.useState)([]),[t,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{(async()=>{a(!0);let e=await (0,p.DM)();e?(r(e.sort((e,r)=>r.score-e.score).slice(0,5)),a(!1)):(a(!1),console.log("Failed to fetch leaderboard data."))})()},[]),(0,n.jsxs)("div",{className:"bg-secondary min-h-screen px-6 py-6 ",children:[(0,n.jsxs)("div",{className:"max-w-[1640px] mx-auto",children:[(0,n.jsx)(j.default,{href:"/",passHref:!0,children:(0,n.jsxs)("button",{className:"text-primary",children:[(0,n.jsx)(g.Z,{}),"Back"]})}),(0,n.jsx)("h1",{className:"text-center text-lg text-primary font-bold pb-2",children:"Top 5 Quiz"})]}),t?(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)(m.Z,{style:{color:"#21888E"}})}):(0,n.jsx)(f.ZP,{container:!0,justifyContent:"center",className:"max-w-[1640px] mx-auto",children:(0,n.jsx)(f.ZP,{item:!0,xs:12,sm:10,md:8,lg:6,children:(0,n.jsx)(l.Z,{component:x.Z,sx:{maxWidth:"100%",overflowX:"auto"},children:(0,n.jsxs)(c.Z,{sx:{minWidth:50},"aria-label":"customized table",children:[(0,n.jsx)(d.Z,{children:(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(w,{align:"center",sx:{width:"20%"},children:"Rank"}),(0,n.jsx)(w,{align:"center",sx:{width:"40%"},children:"Username"}),(0,n.jsx)(w,{align:"center",sx:{width:"20%"},children:"Score"})]})}),(0,n.jsx)(i.Z,{children:e.map((e,r)=>(0,n.jsxs)(y,{children:[(0,n.jsx)(w,{component:"th",scope:"row",align:"center",children:r+1}),(0,n.jsx)(w,{align:"center",children:e.username}),(0,n.jsx)(w,{align:"center",children:e.score})]},r))})]})})})})]})},v=t(3716),Z=()=>(0,n.jsx)("div",{children:(0,n.jsx)(v.Z,{children:(0,n.jsx)(b,{})})})},3716:function(e,r,t){"use strict";var n=t(7437),s=t(2265),a=t(5514),c=t(6463),i=t(6648);r.Z=e=>{let{children:r}=e,{user:t,loading:o}=(0,a.a)(),u=(0,c.useRouter)();return((0,s.useEffect)(()=>{o||t||u.push("/signin")},[t,o,u]),o)?(0,n.jsxs)("div",{className:"bg-primary min-h-screen flex items-center justify-center space-x-2",children:[(0,n.jsx)(i.default,{src:"/image-page.png",width:100,height:100,alt:"Picture of quiz app"}),(0,n.jsx)("h1",{className:"font-bold text-white text-3xl",children:"QUIZ APP"})]}):(0,n.jsx)(n.Fragment,{children:t?r:null})}}},function(e){e.O(0,[358,54,537,269,138,648,628,971,23,744],function(){return e(e.s=5887)}),_N_E=e.O()}]);