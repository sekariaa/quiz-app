(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{7078:function(e,r,t){Promise.resolve().then(t.bind(t,6987))},148:function(e,r,t){"use strict";t.d(r,{DM:function(){return h},F7:function(){return x},Mo:function(){return u},Ms:function(){return m},Vy:function(){return c},cL:function(){return i},n2:function(){return p},sp:function(){return f},v$:function(){return d}});var a=t(5236),s=t(5735),n=t(9842);(0,a.C6)().length||(0,a.ZF)({apiKey:"AIzaSyC0asw5YPc1NtfiwOWPDs6DSJzSu4v2rag",authDomain:"quiz-app-e5a9c.firebaseapp.com",projectId:"quiz-app-e5a9c",storageBucket:"quiz-app-e5a9c.appspot.com",messagingSenderId:"1052981741207",appId:"1:1052981741207:web:659750b96c46cdd7b94bd2"});let o=(0,s.v0)(),l=(0,n.ad)(),c=()=>o,u=async(e,r,t)=>{let a=(0,n.IO)((0,n.hJ)(l,"users"),(0,n.ar)("username","==",t));if(!(await (0,n.PL)(a)).empty){let e=Error("Username already exists");throw e.code="auth/username-already-in-use",e}let c=(await (0,s.Xb)(o,e,r)).user.uid;await (0,n.pl)((0,n.JU)(l,"users",c),{username:t})},i=async(e,r)=>{await (0,s.e5)(o,e,r)},d=e=>{switch(e){case"auth/user-not-found":return"Email not registered";case"auth/wrong-password":return"Wrong password";default:return"Incorrect email or password"}},p=e=>{switch(e){case"auth/email-already-in-use":return"Email has been registered";case"auth/username-already-in-use":return"Username already exists";default:return"An error occurred during the sign up process"}},m=async e=>{try{let r=(0,n.JU)(l,"users",e),t=await (0,n.QT)(r);if(t.exists())return t.data().username;return console.log("No such document!"),null}catch(e){return console.error("Error getting document:",e),null}},f=async(e,r,t)=>{try{await (0,n.pl)((0,n.JU)(l,"users",e),{correct:r,incorrect:t,score:20*r},{merge:!0})}catch(e){console.error("Error saving score to Firestore:",e)}},x=async e=>{try{let r=(0,n.JU)(l,"users",e),t=await (0,n.QT)(r);if(!t.exists())return console.log("No such document!"),null;{let e=t.data();return{correct:e.correct,incorrect:e.incorrect,score:e.score}}}catch(e){return console.error("Error getting document:",e),null}},h=async()=>{try{let e=[];return(await (0,n.PL)((0,n.hJ)(l,"users"))).forEach(r=>{let t=r.data(),a={userId:r.id,username:t.username,score:t.score};e.push(a)}),e}catch(e){return console.error("Error getting scores:",e),null}}},6987:function(e,r,t){"use strict";t.r(r);var a=t(7437),s=t(2265),n=t(148),o=t(6463),l=t(7138),c=t(9343),u=t(239),i=t(4769),d=t(468),p=t(9934),m=t(4820);r.default=()=>{let{register:e,handleSubmit:r,formState:{errors:t}}=(0,c.cI)(),[f,x]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),[y,w]=(0,s.useState)(!1),[b,j]=(0,s.useState)(!1),N=(0,o.useRouter)(),v=async e=>{x(null),j(!1);try{w(!0),await (0,n.cL)(e.email,e.password),w(!1),N.push("/")}catch(e){w(!1),x((0,n.v$)(e.code)),j(!0)}},k=(e,r)=>{"clickaway"!==r&&j(!1)};return(0,a.jsx)("div",{className:"bg-secondary min-h-screen px-6 py-6 md:flex md:items-center md:justify-center",children:(0,a.jsxs)("div",{className:"bg-light rounded-3xl mx-auto p-3 shadow-2xl max-w-md md:w-full",children:[(0,a.jsx)("h1",{className:"px-3 text-gray-900 font-bold mb-1 text-lg",children:"Welcome Back!"}),(0,a.jsxs)("form",{onSubmit:r(v),className:"max-w-md mx-auto p-3",children:[(0,a.jsxs)("div",{className:"relative z-0 w-full mb-5 group",children:[(0,a.jsx)("input",{type:"email",id:"floating_email",...e("email",{required:"Email is required"}),className:"border ".concat(t.email?"border-red-500":"border-gray-300"," block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-primary peer"),placeholder:" ",autoComplete:"email",required:!0}),t.email&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:t.email.message}),(0,a.jsx)("label",{htmlFor:"floating_email",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-primary peer-focus:dark:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Email"})]}),(0,a.jsxs)("div",{className:"relative z-0 w-full mb-5 group",children:[(0,a.jsx)("input",{type:h?"text":"password",id:"floating_password",...e("password",{required:"Password is required",minLength:{value:6,message:"Minimum length of 6 characters"}}),className:"border ".concat(t.password?"border-red-500":"border-gray-300"," block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-primary peer"),placeholder:" ",autoComplete:"new-password",required:!0}),(0,a.jsx)("span",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:()=>{g(e=>!e)},children:h?(0,a.jsx)(u.Z,{className:"text-gray-300"}):(0,a.jsx)(i.Z,{className:"text-gray-300"})}),t.password&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:t.password.message}),(0,a.jsx)("label",{htmlFor:"floating_password",className:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-primary peer-focus:dark:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6",children:"Password"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full relative inline-flex items-center justify-center p-0.5 mb-1 me-2 overflow-hidden text-sm font-medium text-white rounded-lg group bg-primary",children:y?(0,a.jsx)("span",{className:"w-full relative px-5 py-2 transition-all ease-in duration-75 rounded-md group-hover:bg-opacity-0 ",children:(0,a.jsx)(d.Z,{size:"1rem",style:{color:"white"}})}):(0,a.jsx)("span",{className:"w-full relative px-5 py-2 transition-all ease-in duration-75 rounded-md group-hover:bg-opacity-0 ",children:"Create Account"})})]}),(0,a.jsxs)("p",{className:"flex items-center max-w-md mx-auto text-xs px-3 mb-3 text-gray-900",children:["Don't have account?",(0,a.jsx)(l.default,{href:"/signup",className:"text-primary hover:underline block px-1",children:"Sign up"})]}),(0,a.jsx)(p.Z,{open:b,autoHideDuration:6e3,onClose:k,children:(0,a.jsx)(m.Z,{onClose:k,severity:"error",variant:"filled",sx:{width:"100%"},children:f})})]})})}}},function(e){e.O(0,[358,54,899,269,138,755,971,23,744],function(){return e(e.s=7078)}),_N_E=e.O()}]);