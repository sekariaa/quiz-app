(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{8015:function(e,r,t){Promise.resolve().then(t.bind(t,6747))},5514:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return i},a:function(){return o}});var n=t(7437),s=t(2265),a=t(148);let c=(0,s.createContext)(void 0),i=e=>{let{children:r}=e,[t,i]=(0,s.useState)(null),[o,u]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e=(0,a.Vy)().onAuthStateChanged(e=>{i(e),u(!1)});return()=>e()},[]),(0,n.jsx)(c.Provider,{value:{user:t,loading:o},children:r})},o=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},148:function(e,r,t){"use strict";t.d(r,{DM:function(){return g},F7:function(){return f},Mo:function(){return u},Ms:function(){return h},Vy:function(){return o},cL:function(){return l},n2:function(){return m},sp:function(){return p},v$:function(){return d}});var n=t(5236),s=t(5735),a=t(9842);(0,n.C6)().length||(0,n.ZF)({apiKey:"AIzaSyC0asw5YPc1NtfiwOWPDs6DSJzSu4v2rag",authDomain:"quiz-app-e5a9c.firebaseapp.com",projectId:"quiz-app-e5a9c",storageBucket:"quiz-app-e5a9c.appspot.com",messagingSenderId:"1052981741207",appId:"1:1052981741207:web:659750b96c46cdd7b94bd2"});let c=(0,s.v0)(),i=(0,a.ad)(),o=()=>c,u=async(e,r,t)=>{let n=(0,a.IO)((0,a.hJ)(i,"users"),(0,a.ar)("username","==",t));if(!(await (0,a.PL)(n)).empty){let e=Error("Username already exists");throw e.code="auth/username-already-in-use",e}let o=(await (0,s.Xb)(c,e,r)).user.uid;await (0,a.pl)((0,a.JU)(i,"users",o),{username:t})},l=async(e,r)=>{await (0,s.e5)(c,e,r)},d=e=>{switch(e){case"auth/user-not-found":return"Email not registered";case"auth/wrong-password":return"Wrong password";default:return"Incorrect email or password"}},m=e=>{switch(e){case"auth/email-already-in-use":return"Email has been registered";case"auth/username-already-in-use":return"Username already exists";default:return"An error occurred during the sign up process"}},h=async e=>{try{let r=(0,a.JU)(i,"users",e),t=await (0,a.QT)(r);if(t.exists())return t.data().username;return console.log("No such document!"),null}catch(e){return console.error("Error getting document:",e),null}},p=async(e,r,t)=>{try{await (0,a.pl)((0,a.JU)(i,"users",e),{correct:r,incorrect:t,score:20*r},{merge:!0})}catch(e){console.error("Error saving score to Firestore:",e)}},f=async e=>{try{let r=(0,a.JU)(i,"users",e),t=await (0,a.QT)(r);if(!t.exists())return console.log("No such document!"),null;{let e=t.data();return{correct:e.correct,incorrect:e.incorrect,score:e.score}}}catch(e){return console.error("Error getting document:",e),null}},g=async()=>{try{let e=[];return(await (0,a.PL)((0,a.hJ)(i,"users"))).forEach(r=>{let t=r.data(),n={userId:r.id,username:t.username,score:t.score};e.push(n)}),e}catch(e){return console.error("Error getting scores:",e),null}}},6747:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var n=t(7437),s=t(2265),a=t(8472);async function c(){try{return(await a.Z.get("https://opentdb.com/api.php?amount=5&category=9&difficulty=easy&type=multiple")).data.results}catch(e){throw Error("Failed to fetch questions")}}var i=t(6463),o=t(148),u=t(5514),l=t(468),d=t(1225),m=t(1948);let h=e=>{let r=document.createElement("textarea");return r.innerHTML=e,r.value};var p=()=>{let[e,r]=(0,s.useState)([]),[t,a]=(0,s.useState)(()=>JSON.parse(localStorage.getItem("quizAnswers")||"{}")),[p,f]=(0,s.useState)({correct:0,incorrect:0}),[g,x]=(0,s.useState)(0),[y,w]=(0,s.useState)(()=>{let e=localStorage.getItem("quizTimeRemaining");return e?parseInt(e):60}),v=(0,i.useRouter)(),{user:j}=(0,u.a)();(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("quizQuestions");if(e)r(JSON.parse(e));else{let e=(await c()).map(e=>({...e,question:h(e.question),correct_answer:h(e.correct_answer),incorrect_answers:e.incorrect_answers.map(e=>h(e))}));localStorage.setItem("quizQuestions",JSON.stringify(e)),r(e)}}catch(e){console.error("Error fetching questions:",e)}})()},[]),(0,s.useEffect)(()=>{(()=>{let e=localStorage.getItem("quizStartTime"),r=new Date().getTime();if(e){let t=60-Math.floor((r-parseInt(e))/1e3);w(t>0?t:0)}else localStorage.setItem("quizStartTime",r.toString()),w(60)})();let e=setInterval(()=>{w(r=>r>0?(localStorage.setItem("quizTimeRemaining",(r-1).toString()),r-1):(clearInterval(e),b(),0))},1e3);return()=>clearInterval(e)},[]);let b=()=>{let r=e.reduce((e,r,n)=>t[n]===r.correct_answer?{...e,correct:e.correct+1}:{...e,incorrect:e.incorrect+1},{correct:0,incorrect:0});f(r),(0,o.sp)(j.uid,r.correct,r.incorrect),localStorage.removeItem("quizQuestions"),localStorage.removeItem("quizAnswers"),localStorage.removeItem("quizStartTime"),localStorage.removeItem("quizTimeRemaining"),v.push("/result")},S=e=>{let r={...t,[g]:e};a(r),localStorage.setItem("quizAnswers",JSON.stringify(r))};if((0,s.useEffect)(()=>{0===y&&b()},[y]),0===e.length)return(0,n.jsx)("div",{className:"bg-secondary flex justify-center items-center h-screen",children:(0,n.jsx)(l.Z,{style:{color:"#21888E"}})});let I=e[g];return(0,n.jsxs)("div",{className:"bg-secondary min-h-screen px-6 py-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center max-w-[1640px] mx-auto md:w-1/2",children:[(0,n.jsxs)("div",{className:"outline outline-2 rounded-full py-1 px-2 text-primary hover:bg-primary hover:text-white outline-primary font-bold",children:["Question ",g+1," of ",e.length]}),(0,n.jsxs)("div",{className:"outline outline-2 rounded-full py-1 px-2 text-primary hover:bg-primary hover:text-white outline-primary font-bold",children:[Math.floor(y/60),":",y%60<10?"0".concat(y%60):y%60]})]}),(0,n.jsxs)("div",{className:"max-w-[1640px] mx-auto bg-light p-3 rounded-3xl shadow-xl mt-3 md:w-1/2",children:[(0,n.jsxs)("div",{className:"text-gray-900 space-y-3",children:[(0,n.jsx)("h3",{children:I.question}),(0,n.jsxs)("ul",{children:[I.incorrect_answers.map((e,r)=>(0,n.jsx)("li",{children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"answers",value:e,onChange:()=>S(e),checked:t[g]===e}),e]})},r)),(0,n.jsx)("li",{children:(0,n.jsxs)("label",{children:[(0,n.jsx)("input",{type:"radio",name:"answers",value:I.correct_answer,onChange:()=>S(I.correct_answer),checked:t[g]===I.correct_answer}),I.correct_answer]})})]})]}),(0,n.jsxs)("div",{className:"space-x-2 flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:"text-primary",onClick:()=>{x(e=>e-1)},disabled:0===g,children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)("button",{className:"text-primary",onClick:()=>{x(e=>e+1)},disabled:g===e.length-1,children:(0,n.jsx)(m.Z,{})})]}),g===e.length-1&&(0,n.jsx)("button",{className:"outline outline-2 rounded-full py-1 px-2 text-primary hover:bg-primary hover:text-white outline-primary font-bold",onClick:()=>{window.confirm("Are you sure about collecting answers?")&&b()},children:"Submit"})]})]})]})},f=t(3716),g=()=>(0,n.jsx)(f.Z,{children:(0,n.jsx)(p,{})})},3716:function(e,r,t){"use strict";var n=t(7437),s=t(2265),a=t(5514),c=t(6463),i=t(6648);r.Z=e=>{let{children:r}=e,{user:t,loading:o}=(0,a.a)(),u=(0,c.useRouter)();return((0,s.useEffect)(()=>{o||t||u.push("/signin")},[t,o,u]),o)?(0,n.jsxs)("div",{className:"bg-primary min-h-screen flex items-center justify-center space-x-2",children:[(0,n.jsx)(i.default,{src:"/image-page.png",width:100,height:100,alt:"Picture of quiz app"}),(0,n.jsx)("h1",{className:"font-bold text-white text-3xl",children:"QUIZ APP"})]}):(0,n.jsx)(n.Fragment,{children:t?r:null})}}},function(e){e.O(0,[358,54,899,269,648,251,971,23,744],function(){return e(e.s=8015)}),_N_E=e.O()}]);